version rootProject.version

task gatlingRun(type: JavaExec) {
    def target = project.findProperty("target") ?: "defaltA"
    description = 'Run gatling tests'
    classpath = sourceSets.main.runtimeClasspath + sourceSets.main.compileClasspath
    main = "io.gatling.app.Gatling"
    sourceSets.main.scala.properties.each {
        println it
    }
    args = ['-s', 'com.citi.gatlingtest.xingdata.simulations.' + target,
            '-sf', "$projectDir/main/scala",
            '-df', 'main/resources/data',
            '-rf', "${buildDir}/reports/gatling"
    ]
}


task gatlingRunFromAnother(type: JavaExec) {
    description = 'Run gatling tests'
    classpath = sourceSets.main.runtimeClasspath + sourceSets.main.compileClasspath
    main = "com.citi.gatlingtest.xingdata.App"
    sourceSets.main.scala.properties.each {
        println it
    }
    args = ['-s', 'com.citi.gatlingtest.xingdata.simulations.XiNGDataGatlingTestSimulation',
            '-sf', "$projectDir/main/scala",
            '-df', 'main/resources/data',
            '-rf', "${buildDir}/reports/gatling"
    ]
}